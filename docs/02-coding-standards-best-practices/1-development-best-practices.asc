[[_coding_standars_and_best_practices]]
== Coding Standards and Best Practices

Development best practices and coding standards have been learned within the connector development community over time, leading to improve the quality of connectors. During the cerfitication process, most of these practices and standars are checked through automated tools, such as SonarQube.


=== Anypoint™ Connector DevKit Version

The last version of Anypoint™ Connector DevKit must be used to develop your connector. As of Jun 2015, the latest stable Devkit version is 3.7.0.

DevKit 3.7.x assures that a connector will be compatible with Mule ESB 3.5.x, Mule ESB 3.6.x and Mule ESB 3.7.x. However, external libraries employed by the connector might have conflicts with different Mule ESB versions. Samity checks are mandatory for every Mule ESB Version.

=== Connector Category

A connector should define its category in the POM properties:

[source, xml]
----
<groupId>org.mule.modules</groupId>
<artifactId>mule-module-sample-connector</artifactId>
<version>1.0.0-SNAPSHOT</version>
<name>Mule Sample Connector </name>
<packaging>pom/packaging>

<properties>
    <category>Select</category>
    <licensePath>LICENSE.md</licensePath>
    <devkit.studio.package.skip>false</devkit.studio.package.skip>
</properties>
----

DevKit 3.7.x requires you to use **Select** in the category (i.e. <category>Select</category>) and to inlcude the **@RequiresEnterpriseLicense**. In addition, you should use your own license validation mechanism.

==== Distribution Management

Configuration of the distributionManagement element varies from connector to connector, depending on its category and the project structure.

1. Select:
+
[source, xml]
----
<distributionManagement>
    <repository>
        <id>mule-ee-releases</id>
        <name>MuleEE Releases Repository</name>
        <url>https://repository-master.mulesoft.org/nexus/content/repositories/releases-ee/</url>
    </repository>
    <snapshotRepository>
        <id>mule-ee-snapshots</id>
        <name>MuleEE Snapshots Repository</name>
        <url>https://repository-master.mulesoft.org/nexus/content/repositories/ci-snapshots/</url>
        <uniqueVersion>false</uniqueVersion>
    </snapshotRepository>
</distributionManagement>
----

2. Multi-module Select:

If a Select connector is part of a multi-module project, before the release we should verify that:
* The connector's module is deployed to the private nexus (same distribution management as described above for Standard, ci-releases).
* The parent pom and other non-connector modules of the multi-module project have the same distribution management as described above for public or Community connectors.

For example, in a project with a parent pom, a utils module and a connector module, if and only if the connector is Select, then the parent pom should declare the public distributionManagement, and then it should be overriden in the connectors' pom with the private distributionManagement.

==== Distribution Management Matrix:

[width="40%",frame="topbot",options="header,footer"]
|======================
| | Select
| Single Module    |  https://repository-master.mulesoft.org/nexus/content/repositories/releases-ee/
| Multi Module     |  Parent, Utils:
|                  |  http://repository-master.mulesoft.org/releases/
|                  |  Connector:
|                  |  https://repository-master.mulesoft.org/nexus/content/repositories/releases-ee/
|======================

=== Code Conventions

This subsection covers the following areas:

* Maven Conventions and Setup
* DevKit Standards and Best Practices
* Connector Demo Example
* Third Party Licenses

include::sections/1-maven-convention-setup.asc[]
include::sections/2-devkit-standars-best-practices.asc[]
include::sections/3-connector-demo-example.asc[]
include::sections/4-third-party-licenses.asc[]
